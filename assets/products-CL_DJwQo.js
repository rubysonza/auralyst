import"./styles-BBXe8umR.js";import{g as X}from"./index-CH_iu5NA.js";document.addEventListener("DOMContentLoaded",()=>{X.registerPlugin();const U=document.getElementById("back-button"),x=document.getElementById("filter-sort-section");document.getElementById("header-title");const c=document.getElementById("step-scroll");document.getElementById("step-filter");const L=document.getElementById("product-grid"),S=document.getElementById("plp-section"),M=document.getElementById("pdp-section"),T=document.getElementById("sort-menu-button"),m=document.getElementById("sort-menu-panel"),v=document.getElementById("sort-menu-icon"),E=document.getElementById("selected-sort-option");m.querySelectorAll("a");const k=document.getElementById("open-filter-button"),W=document.getElementById("close-filter-button"),f=document.getElementById("filter-sidebar"),B=document.getElementById("filter-backdrop"),y=document.getElementById("active-filters-container"),d={menuButton:document.getElementById("menu-button"),menuClose:document.getElementById("menu-close"),menuScreen:document.getElementById("menu-screen"),menuBackdrop:document.getElementById("menu-backdrop")};let _=window.scrollY,$=0,h=!1,P,N,w="best-match",I=[],l={skin_types:[],skin_concerns:[],brand_name:[]};function J(e){return`
            <div class="product-card group relative flex flex-col w-auto h-auto overflow-hidden rounded-3xl border border-gray-100 bg-white shadow-lg cursor-pointer" data-product-name="${e.product_name}">
                <div class="aspect-h-4 aspect-w-3 bg-gray-200 sm:aspect-none h-40">
                    <img src="${e.image_url}" alt="${e.brand_name} ${e.product_name}" class="h-full w-full object-contain object-center bg-white">
                </div>

                <div class="flex flex-1 flex-col space-y-1 p-2 sm:p-4">
                    <p class="text-sm font-bold text-gray-900">${e.brand_name}</p>
                    <h3 class="text-base font-medium text-gray-900">${e.product_name}</h3>
                    <p class="text-sm font-medium text-gray-500">${e.product_type}</p>
                    
                    <div class="flex flex-1 items-end justify-center">
                        <div class="flex flex-1 items-center justify-between py-2">
                            <p class="text-lg font-semibold text-gray-900">$${e.price.toFixed(2)}</p>
                            
                            <button 
                                type="button" 
                                class="add-to-routine-btn rounded-full bg-[#7D32FF] p-2 px-3 text-white shadow-sm hover:bg-[#6524D5] focus-visible:outline-offset-2 cursor-pointer"
                                data-product-name="${e.product_name}"
                            >
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"><path fill="currentColor" d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        `}async function F(e){if(!L)return;w="best-match",E.textContent="Sort by: Best Match";const t=`./products-list/${e}.json`;L.innerHTML='<p class="text-center text-gray-500">Loading products...</p>';try{const o=await(await fetch(t)).json();I=o[e]||o,b()}catch(n){console.error("Error displaying products:",n),document.getElementById("product-grid").innerHTML="<p>Could not load products.</p>"}}function K(){document.getElementById("product-grid").addEventListener("click",t=>{const n=t.target.closest(".product-card");if(n){const o=n.dataset.productName;console.log("Card clicked, finding product:",o);const r=I.find(s=>s.product_name===o);r?(console.log("Product found:",r),te(r)):console.error("Product not found in allProducts array:",o)}})}function Q(){M.classList.add("hidden"),S.classList.remove("hidden"),window.scrollTo(0,$)}const Z="mySkincareRoutine";function ee(){const e=localStorage.getItem(Z);if(!e){console.log("No saved routine found.");return}const t=[{displayName:"Cleanser",checkValues:["Cleanser","Oil Cleanser","Water Cleanser"]},{displayName:"Exfoliator",checkValues:["Exfoliator"]},{displayName:"Toner",checkValues:["Toner"]},{displayName:"Serum",checkValues:["Serum"]},{displayName:"Eye Cream",checkValues:["Eye Cream"]},{displayName:"Spot Treatment",checkValues:["Spot Treatment"]},{displayName:"Moisturizer",checkValues:["Moisturizer"]},{displayName:"Face Oil",checkValues:["Face Oil"]},{displayName:"Sunscreen",checkValues:["Sunscreen"]},{displayName:"Sleeping Mask",checkValues:["Sleeping Mask"]}],n=JSON.parse(e),o=document.getElementById("step-filter"),r=new Set([...n.am,...n.pm]);r.size>0&&o&&(o.innerHTML="",t.forEach(s=>{if(s.checkValues.some(i=>r.has(i))){const i=document.createElement("button"),p=s.displayName.toLowerCase().replace(/\s+/g,"-");i.className="step-button",i.dataset.step=p,i.textContent=s.displayName,o.appendChild(i)}}))}function te(e){$=window.scrollY,j(e),S.classList.add("hidden"),M.classList.remove("hidden"),window.scrollTo(0,0)}const H={Normal:"bg-green-100 text-green-800",Oily:"bg-blue-100 text-blue-800",Dry:"bg-orange-100 text-orange-800",Combination:"bg-purple-100 text-purple-800",Sensitive:"bg-pink-100 text-pink-800"};function j(e){const t=document.getElementById("pdp-image-link"),n=document.getElementById("pdp-image");n.src=e.image_url,t.href=e.product_url||"#",document.getElementById("pdp-brand").textContent=e.brand_name,document.getElementById("pdp-name").textContent=e.product_name,document.getElementById("pdp-type").textContent=e.product_type,document.getElementById("pdp-price").textContent=`$${e.price.toFixed(2)}`;const o=document.getElementById("pdp-skin-types");o.innerHTML=(e.skin_types||[]).map(g=>`<span class="text-sm font-medium px-3 py-1 rounded-full ${H[g]||H.default}">${g}</span>`).join("");const r=document.getElementById("pdp-skin-concerns");r.innerHTML=(e.skin_concerns||[]).map(g=>`
            <div class="flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 text-green-500 mr-2 flex-shrink-0">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                </svg>
                <span class="text-gray-700 text-sm">${g}</span>
            </div>
        `).join("");const s=document.getElementById("pdp-key-actives");s.innerHTML=(e.key_actives||[]).map(g=>`<div class="p-2 rounded-lg"><p class="text-gray-800">${g}</p></div>`).join("");const a=document.getElementById("pdp-usage-time");let i="",p="flex items-center justify-evenly p-4 rounded-lg border";const R=`
                <div class="flex items-center gap-2 text-[#575000]">
                    <span class="text-lg ">
                        <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 24 24">
                            <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 12a4 4 0 1 0 8 0a4 4 0 1 0-8 0m-5 0h1m8-9v1m8 8h1m-9 8v1M5.6 5.6l.7.7m12.1-.7l-.7.7m0 11.4l.7.7m-12.1-.7l-.7.7" />
                        </svg>
                    </span>
                    <span class="font-medium">Morning</span>
                </div>`,Y=`
                <div class="flex items-center gap-2 text-[#002557]">
                    <span class="text-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                            <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 3h.393a7.5 7.5 0 0 0 7.92 12.446A9 9 0 1 1 12 2.992z" />
                        </svg>
                    </span>
                    <span class="font-medium">Night</span>
                </div>`;e.usage_time==="Both"?(i=`${R}<div class="h-6 w-px bg-gray-300 mx-4"></div>${Y}`,p+=" bg-gradient-to-r from-yellow-200 to-blue-200 border-gray-200"):e.usage_time==="Morning"?(i=R,p+=" bg-yellow-100 border-yellow-200"):e.usage_time==="Night"&&(i=Y,p+=" bg-blue-100 border-blue-200"),a.innerHTML=i,a.className=p;const q=document.getElementById("select-morning-btn"),G=document.getElementById("select-night-btn");q.disabled=!1,G.disabled=!1,e.usage_time==="Morning"?G.disabled=!0:e.usage_time==="Night"&&(q.disabled=!0)}function ne(){const e=document.getElementById("select-morning-btn"),t=document.getElementById("select-night-btn"),n=document.getElementById("add-to-routine-btn"),o=document.getElementById("add-to-routine-btn-text"),r=document.getElementById("cta-error-msg");let s=[];function a(){s.includes("Morning")?e.classList.add("active"):e.classList.remove("active"),s.includes("Night")?t.classList.add("active"):t.classList.remove("active"),s.length===0?o.textContent="Add to Routine":s.length===2?o.textContent="Add to Morning & Night":o.textContent=`Add to ${s[0]}`}e.addEventListener("click",()=>{s.includes("Morning")?s=s.filter(i=>i!=="Morning"):s.push("Morning"),a()}),t.addEventListener("click",()=>{s.includes("Night")?s=s.filter(i=>i!=="Night"):s.push("Night"),a()}),n.addEventListener("click",()=>{s.length===0?(r.textContent="Please select a routine first.",setTimeout(()=>{r.textContent=""},3e3)):(r.textContent="",console.log(`Product added to: ${s.join(", ")} Routine(s)`),s=[],a())})}c.addEventListener("mousedown",e=>{h=!0,c.classList.add("active:cursor-grabbing"),P=e.pageX-c.offsetLeft,N=c.scrollLeft}),c.addEventListener("mouseleave",()=>{h=!1,c.classList.remove("active:cursor-pointer")}),document.addEventListener("mouseup",()=>{h=!1,c.classList.remove("active:cursor-pointer")}),c.addEventListener("mousemove",e=>{if(!h)return;e.preventDefault();const n=(e.pageX-c.offsetLeft-P)*.8;c.scrollLeft=N-n});function se(){const e=document.getElementById("step-filter");!e||!c||e.addEventListener("click",t=>{if(t.target.matches(".step-button")){const n=t.target,o=n.dataset.step;e.querySelectorAll(".step-button").forEach(a=>a.classList.remove("active")),n.classList.add("active");const s=n.offsetLeft-20;c.scrollTo({left:s,behavior:"smooth"}),F(o)}})}window.addEventListener("scroll",()=>{_<window.scrollY&&window.scrollY>150?x.classList.add("-translate-y-full"):x.classList.remove("-translate-y-full"),_=window.scrollY});function oe(e){const t=document.getElementById("product-grid");t&&(t.innerHTML=e.map(n=>J(n)).join(""))}function re(){if(!T||!m||!E||!v){console.error("Sort menu elements not found!");return}T.addEventListener("click",e=>{e.stopPropagation(),m.classList.toggle("hidden"),v.classList.toggle("rotate-180")}),m.addEventListener("click",e=>{e.target.matches("a[data-sort]")&&(e.preventDefault(),w=e.target.dataset.sort,E.textContent=`Sort by: ${e.target.textContent}`,b(),m.classList.add("hidden"),v.classList.remove("rotate-180"))}),window.addEventListener("click",()=>{m.classList.contains("hidden")||(m.classList.add("hidden"),v.classList.remove("rotate-180"))})}function b(){let e=[...I];switch(l.skin_types.length>0&&(e=e.filter(t=>l.skin_types.some(n=>t.skin_types.includes(n)))),l.skin_concerns.length>0&&(e=e.filter(t=>l.skin_concerns.some(n=>t.skin_concerns.includes(n)))),l.brand_name.length>0&&(e=e.filter(t=>l.brand_name.includes(t.brand_name))),w){case"price-low-high":e.sort((t,n)=>t.price-n.price);break;case"price-high-low":e.sort((t,n)=>n.price-t.price);break}oe(e),le()}function ie(){const e=x.getBoundingClientRect();f.style.top=`${e.top}px`,f.classList.remove("-translate-x-full"),B.classList.remove("hidden"),k.classList.add("opacity-0"),document.body.style.overflow="hidden"}function A(){f.classList.add("-translate-x-full"),B.classList.add("hidden"),k.classList.remove("opacity-0"),document.body.style.overflow=""}async function ae(){const e=document.getElementById("brands-list");if(!e)return;e.innerHTML='<p class="text-sm text-gray-400">Loading brands...</p>';const t=["cleanser","exfoliator","toner","serum","eye-cream","spot-treatment","moisturizer","face-oil","sunscreen","sleeping-mask"];try{const n=t.map(s=>fetch(`./products-list/${s}.json`).then(a=>a.json())),o=await Promise.all(n);let r=[];o.forEach((s,a)=>{const i=t[a];s&&s[i]&&Array.isArray(s[i])&&r.push(...s[i])}),ce(r)}catch(n){console.error("Could not initialize filters:",n),e.innerHTML='<p class="text-xs text-red-500">Error loading brands.</p>'}}function le(){if(!y)return;let e="";for(const t in l)l[t].forEach(n=>{e+=`
                    <span class="inline-flex items-center gap-x-1.5 rounded-full bg-[#7D32FF20] px-2 py-1 text-sm font-medium text-[#7D32FF]">
                        ${n}
                        <button type="button" class="remove-filter-btn group relative -mr-1 h-3.5 w-3.5 rounded-sm hover:bg-indigo-600/20" data-category="${t}" data-value="${n}">
                            <svg viewBox="0 0 14 14" class="h-3.5 w-3.5 stroke-indigo-600/50 group-hover:stroke-indigo-600/75">
                                <path d="M4 4l6 6m0-6l-6 6" />
                            </svg>
                        </button>
                    </span>
                `});y.innerHTML=e}function ce(e){const t=document.getElementById("brands-list");if(!t)return;const n={};e.forEach(r=>{const s=r.brand_name;s&&(n[s]=(n[s]||0)+1)});let o="";Object.keys(n).sort().forEach(r=>{const s=n[r],a=`filter-brand-${r.toLowerCase().replace(/\s+/g,"-")}`;o+=`
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <input id="${a}" type="checkbox" data-category="brand_name" data-value="${r}" class="h-4 w-4 rounded border-gray-300 accent-[#7D32FF] cursor-pointer">
                        <label for="${a}" class="ml-3 text-sm text-gray-600 cursor-pointer">${r}</label>
                    </div>
                    <span class="text-xs text-gray-500">${s}</span>
                </div>
            `}),t.innerHTML=o}function de(){const e=document.getElementById("open-filter-button"),t=document.getElementById("close-filter-button"),n=document.getElementById("filter-sidebar");!e||!t||!n||(e.addEventListener("click",()=>{n.classList.remove("-translate-x-full"),n.scrollTop=0}),t.addEventListener("click",()=>{n.classList.add("-translate-x-full")}))}function ue(){f&&f.addEventListener("change",e=>{if(e.target.type==="checkbox"){const t=e.target.dataset.category,n=e.target.dataset.value;if(!t||!n)return;e.target.checked?l[t].push(n):l[t]=l[t].filter(o=>o!==n),b()}})}function me(){y&&y.addEventListener("click",e=>{const t=e.target.closest(".remove-filter-btn");if(t){const n=t.dataset.category,o=t.dataset.value;l[n]=l[n].filter(s=>s!==o);const r=document.querySelector(`input[data-category="${n}"][data-value="${o}"]`);r&&(r.checked=!1),b()}})}k.addEventListener("click",ie),W.addEventListener("click",A),B.addEventListener("click",A);function pe(){const e=document.getElementById("pdp-favorite-btn"),t=document.getElementById("heart-icon-unfilled"),n=document.getElementById("heart-icon-filled");if(!e||!t||!n)return;let o=!1;e.addEventListener("click",()=>{o=!o,o?(t.classList.add("hidden"),n.classList.remove("hidden"),V("Product saved to favorites")):(n.classList.add("hidden"),t.classList.remove("hidden"),V("Product removed from favorites"))})}let D;function V(e){const t=document.getElementById("favorite-toast");t&&(clearTimeout(D),t.textContent=e,t.classList.remove("hidden","toast-exit-active"),t.classList.add("toast-enter-active"),D=setTimeout(()=>{t.classList.remove("toast-enter-active"),t.classList.add("toast-exit-active"),setTimeout(()=>t.classList.add("hidden"),300)},3e3))}let u=null;function ge(){if(u){u.play();return}u=X.timeline({paused:!0}),u.to(d.menuBackdrop,{opacity:1,duration:.2,onStart:()=>d.menuBackdrop.classList.remove("hidden")},0).to(d.menuScreen,{x:0,duration:.2,ease:"power2.inOut",onStart:()=>d.menuScreen.classList.remove("translate-x-full")},0),u.play()}function z(){u&&(u.reverse(),u.eventCallback("onReverseComplete",()=>{d.menuBackdrop.classList.add("hidden"),d.menuScreen.classList.add("-translate-x-full")}))}d.menuButton.addEventListener("click",ge),d.menuClose.addEventListener("click",z),d.menuBackdrop.addEventListener("click",e=>{e.target===d.menuBackdrop&&z()}),ee(),re(),se(),ue(),me(),K(),ne(),de(),pe(),U.addEventListener("click",Q),ae();const O=document.querySelector('button[data-step="cleanser"]');O&&O.classList.add("active");const C=document.querySelector("#step-filter .step-button");C?(C.classList.add("active"),F(C.dataset.step)):L.innerHTML='<p class="text-center text-gray-500 col-span-full">Save a routine to see relevant products here!</p>',j(productData)});
